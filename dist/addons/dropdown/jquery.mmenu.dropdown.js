Mmenu.addons.dropdown=function(){var o=this;if(this.opts.offCanvas){var y=this.opts.dropdown,x=this.conf.dropdown;if("boolean"==typeof y&&y&&(y={drop:y}),"object"!=typeof y&&(y={}),"string"==typeof y.position&&(y.position={of:y.position}),(y=this.opts.dropdown=jQuery.extend(!0,{},Mmenu.options.dropdown,y)).drop){var b;this.bind("initMenu:after",function(){var t=this;if(this.node.$menu.addClass("mm-menu_dropdown"),"string"!=typeof y.position.of){var o=this._getOriginalMenuId();o&&o.length&&(y.position.of='[href="#'+o+'"]')}"string"==typeof y.position.of&&(b=jQuery(y.position.of),y.event=y.event.split(" "),1==y.event.length&&(y.event[1]=y.event[0]),"hover"==y.event[0]&&b.on("mouseenter.mm-dropdown",function(){t.open()}),"hover"==y.event[1]&&this.node.$menu.on("mouseleave.mm-dropdown",function(){t.close()}))}),this.bind("open:start",function(){this.node.$menu.data("mm-style",this.node.$menu.attr("style")||""),jQuery("html").addClass("mm-wrapper_dropdown")}),this.bind("close:finish",function(){this.node.$menu.attr("style",this.node.$menu.data("mm-style")),jQuery("html").removeClass("mm-wrapper_dropdown")});var e=function(t,o){var e,n,i=o[0],s=o[1],r="x"==t?"scrollLeft":"scrollTop",m="x"==t?"outerWidth":"outerHeight",p="x"==t?"left":"top",d="x"==t?"right":"bottom",a="x"==t?"width":"height",f="x"==t?"maxWidth":"maxHeight",u=null,h=jQuery(window)[r](),l=b.offset()[p]-=h,c=l+b[m](),w=jQuery(window)[a](),v=x.offset.button[t]+x.offset.viewport[t];if(y.position[t])switch(y.position[t]){case"left":case"bottom":u="after";break;case"right":case"top":u="before"}return null===u&&(u=l+(c-l)/2<w/2?"after":"before"),"after"==u?(n=w-((e="x"==t?l:c)+v),i[p]=e+x.offset.button[t],i[d]="auto",y.tip&&s.push("mm-menu_tip-"+("x"==t?"left":"top"))):(n=(e="x"==t?c:l)-v,i[d]="calc( 100% - "+(e-x.offset.button[t])+"px )",i[p]="auto",y.tip&&s.push("mm-menu_tip-"+("x"==t?"right":"bottom"))),y.fitViewport&&(i[f]=Math.min(x[a].max,n)),[i,s]},n=function(){if(this.vars.opened){this.node.$menu.attr("style",this.node.$menu.data("mm-style"));var t=[{},[]];t=e.call(this,"y",t),t=e.call(this,"x",t),this.node.$menu.css(t[0]),y.tip&&this.node.$menu.removeClass("mm-menu_tip-left mm-menu_tip-right mm-menu_tip-top mm-menu_tip-bottom").addClass(t[1].join(" "))}};this.bind("open:start",n),jQuery(window).on("resize.mm-dropdown",function(t){n.call(o)}),this.opts.offCanvas.blockUI||jQuery(window).on("scroll.mm-dropdown",function(t){n.call(o)})}}},Mmenu.options.dropdown={drop:!1,fitViewport:!0,event:"click",position:{},tip:!0},Mmenu.configs.dropdown={offset:{button:{x:-5,y:5},viewport:{x:20,y:20}},height:{max:880},width:{max:440}};
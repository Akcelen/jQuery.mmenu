Mmenu.addons.dropdown=function(){var o=this;if(this.opts.offCanvas){var b=this.opts.dropdown,x=this.conf.dropdown;if("boolean"==typeof b&&b&&(b={drop:b}),"object"!=typeof b&&(b={}),"string"==typeof b.position&&(b.position={of:b.position}),this.opts.dropdown=Mmenu.extend(b,Mmenu.options.dropdown),b.drop){var $;this.bind("initMenu:after",function(){var t=this;if(this.node.$menu.addClass("mm-menu_dropdown"),"string"!=typeof b.position.of){var o=this.vars.orgMenuId;o&&o.length&&(b.position.of='[href="#'+o+'"]')}if("string"==typeof b.position.of){$=Mmenu.$(b.position.of);var n=b.event.split(" ");1==n.length&&(n[1]=n[0]),"hover"==n[0]&&$.on("mouseenter.mm-dropdown",function(){t.open()}),"hover"==n[1]&&this.node.$menu.on("mouseleave.mm-dropdown",function(){t.close()})}}),this.bind("open:start",function(){this.node.$menu[0].mmStyle=this.node.$menu[0].getAttribute("style")||"",Mmenu.$("html").addClass("mm-wrapper_dropdown")}),this.bind("close:finish",function(){this.node.$menu[0].setAttribute("style",this.node.$menu[0].mmStyle),Mmenu.$("html").removeClass("mm-wrapper_dropdown")});var n=function(t,o){var n,e,i=o[0],s=o[1],m="x"==t?"scrollLeft":"scrollTop",r="x"==t?"outerWidth":"outerHeight",p="x"==t?"left":"top",d="x"==t?"right":"bottom",f="x"==t?"width":"height",u="x"==t?"maxWidth":"maxHeight",a=null,h=Mmenu.$(window)[m](),l=$.offset()[p]-=h,c=l+$[r](),w=Mmenu.$(window)[f](),v=x.offset.button[t]+x.offset.viewport[t];if(b.position[t])switch(b.position[t]){case"left":case"bottom":a="after";break;case"right":case"top":a="before"}return null===a&&(a=l+(c-l)/2<w/2?"after":"before"),"after"==a?(e=w-((n="x"==t?l:c)+v),i[p]=n+x.offset.button[t],i[d]="auto",b.tip&&s.push("mm-menu_tip-"+("x"==t?"left":"top"))):(e=(n="x"==t?c:l)-v,i[d]="calc( 100% - "+(n-x.offset.button[t])+"px )",i[p]="auto",b.tip&&s.push("mm-menu_tip-"+("x"==t?"right":"bottom"))),b.fitViewport&&(i[u]=Math.min(x[f].max,e)),[i,s]};this.bind("open:start",e),Mmenu.$(window).on("resize.mm-dropdown",function(t){e.call(o)}),this.opts.offCanvas.blockUI||Mmenu.$(window).on("scroll.mm-dropdown",function(t){e.call(o)})}}function e(){if(this.vars.opened){this.node.$menu[0].setAttribute("style",this.node.$menu[0].mmStyle);var t=[{},[]];t=n.call(this,"y",t),t=n.call(this,"x",t),this.node.$menu.css(t[0]),b.tip&&this.node.$menu.removeClass("mm-menu_tip-left mm-menu_tip-right mm-menu_tip-top mm-menu_tip-bottom").addClass(t[1].join(" "))}}},Mmenu.options.dropdown={drop:!1,fitViewport:!0,event:"click",position:{},tip:!0},Mmenu.configs.dropdown={offset:{button:{x:-5,y:5},viewport:{x:20,y:20}},height:{max:880},width:{max:440}};
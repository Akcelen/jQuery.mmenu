Mmenu.addons.drag=function(){if(this.opts.offCanvas&&!("function"!=typeof Hammer||Hammer.VERSION<2)){var v=this.opts.drag,w=this.conf.drag;"boolean"==typeof v&&(v={menu:v,panels:v}),"object"!=typeof v&&(v={}),"boolean"==typeof v.menu&&(v.menu={open:v.menu}),"object"!=typeof v.menu&&(v.menu={}),"boolean"==typeof v.panels&&(v.panels={close:v.panels}),"object"!=typeof v.panels&&(v.panels={}),(v=this.opts.drag=jQuery.extend(!0,{},Mmenu.options.drag,v)).menu.open&&this.bind("setPage:after",function(){var n,t,o,i=this,r={events:"panleft panright",typeLower:"x",typeUpper:"X",open_dir:"right",close_dir:"left",negative:!1},a="width",s=r.open_dir,p=function(e){e<=v.menu.maxStartPos&&(u=1)},m=function(){return jQuery(".mm-slideout")},u=0,d=0,c=0,e=this.opts.extensions.all,l=void 0===e?"left":-1<e.indexOf("mm-menu_position-right")?"right":-1<e.indexOf("mm-menu_position-top")?"top":-1<e.indexOf("mm-menu_position-bottom")?"bottom":"left",f=void 0===e?"back":-1<e.indexOf("mm-menu_position-top")||-1<e.indexOf("mm-menu_position-bottom")||-1<e.indexOf("mm-menu_position-front")?"front":"back";switch(l){case"top":case"bottom":r.events="panup pandown",r.typeLower="y",r.typeUpper="Y",a="height"}switch(l){case"right":case"bottom":r.negative=!0,p=function(e){e>=jQuery(window)[a]()-v.menu.maxStartPos&&(u=1)}}switch(l){case"right":r.open_dir="left",r.close_dir="right";break;case"top":r.open_dir="down",r.close_dir="up";break;case"bottom":r.open_dir="up",r.close_dir="down"}switch(f){case"front":m=function(){return this.node.$menu}}var h,g=Mmenu.__valueOrFn(this.node.$menu,v.menu.node,Mmenu.node.$page);"string"==typeof g&&(g=$(g));var _=new Hammer(g[0],this.opts.drag.vendors.hammer);_.on("panstart",function(e){p.call(i,e.center[r.typeLower]),h=m.call(i),s=r.open_dir}),_.on(r.events+" panend",function(e){0<u&&e.preventDefault()}),_.on(r.events,function(e){if(n=e["delta"+r.typeUpper],r.negative&&(n=-n),n!=d&&(s=d<=n?r.open_dir:r.close_dir),(d=n)>v.menu.threshold&&1==u){if(jQuery("html").hasClass("mm-wrapper_opened"))return;u=2,i._openSetup(),i.trigger("open:start"),jQuery("html").addClass("mm-wrapper_dragging"),c=y(jQuery(window)[a]()*w.menu[a].perc,w.menu[a].min,w.menu[a].max)}2==u&&(t=y(d,10,c)-("front"==f?c:0),r.negative&&(t=-t),o="translate"+r.typeUpper+"("+t+"px )",h.css({"-webkit-transform":"-webkit-"+o,transform:o}))}),_.on("panend",function(e){2==u&&(jQuery("html").removeClass("mm-wrapper_dragging"),h.css("transform",""),i[s==r.open_dir?"_openFinish":"close"]()),u=0})}),v.panels.close&&this.bind("initPanel:after",function(e){var n=this,t=e.data("mm-parent");if(t){t=t.closest(".mm-panel");var o=new Hammer(e[0],this.opts.drag.vendors.hammer),i=null;o.on("panright",function(e){i||(n.openPanel(t),i=setTimeout(function(){clearTimeout(i),i=null},n.conf.openingInterval+n.conf.transitionDuration))})}})}function y(e,n,t){return e<n&&(e=n),t<e&&(e=t),e}},Mmenu.options.drag={menu:{open:!1,maxStartPos:100,threshold:50},panels:{close:!1},vendors:{hammer:{}}},Mmenu.configs.drag={menu:{width:{perc:.8,min:140,max:440},height:{perc:.8,min:140,max:880}},panels:{}};
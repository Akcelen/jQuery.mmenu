Mmenu.addons.columns=function(){var m=this.opts.columns;this.conf.columns;if("boolean"==typeof m&&(m={add:m}),"number"==typeof m&&(m={add:!0,visible:m}),"object"!=typeof m&&(m={}),"number"==typeof m.visible&&(m.visible={min:m.visible,max:m.visible}),(m=this.opts.columns=jQuery.extend(!0,{},Mmenu.options.columns,m)).add){m.visible.min=Math.max(1,Math.min(6,m.visible.min)),m.visible.max=Math.max(m.visible.min,Math.min(6,m.visible.max));for(var i="",s="",e=0;e<=m.visible.max;e++)i+=" mm-menu_columns-"+e,s+=" mm-panel_columns-"+e;i.length&&(i=i.slice(1),s=s.slice(1));var a=s+" mm-panel_opened mm-panel_opened-parent mm-panel_highest";this.bind("openPanel:before",function(e){var n=e.data("mm-parent");if(n&&(n=n.closest(".mm-panel")).length){var m=n.attr("class");if(m&&(m=m.split("mm-panel_columns-")[1]))for(m=parseInt(m.split(" ")[0],10)+1;0<m;){if(!(e=this.node.$pnls.children(".mm-panel_columns-"+m)).length){m=-1;break}m++,e.removeClass(a).addClass("mm-hidden")}}}),this.bind("openPanel:start",function(e){var n=this.node.$pnls.children(".mm-panel_opened-parent").length;e.hasClass("mm-panel_opened-parent")||n++,n=Math.min(m.visible.max,Math.max(m.visible.min,n)),this.node.$menu.removeClass(i).addClass("mm-menu_columns-"+n),this.node.$pnls.children(".mm-panel").removeClass(s).filter(".mm-panel_opened-parent").add(e).slice(-m.visible.max).each(function(e){jQuery(this).addClass("mm-panel_columns-"+e)})})}},Mmenu.options.columns={add:!1,visible:{min:1,max:3}};
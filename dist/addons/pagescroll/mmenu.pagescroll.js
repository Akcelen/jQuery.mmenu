Mmenu.addons.pageScroll=function(){var i,l=this,e=this.opts.pageScroll,o=this.conf.pageScroll;function s(e){i&&i.length&&i.is(":visible")&&Mmenu.$("html, body").animate({scrollTop:i.offset().top+e}),i=Mmenu.$()}function r(e){try{return!("#"==e||"#"!=e.slice(0,1)||!Mmenu.node.$page.find(e).length)}catch(e){return!1}}if("boolean"==typeof e&&(e={scroll:e}),this.opts.pageScroll=Mmenu.extend(e,Mmenu.options.pageScroll),e.scroll&&this.bind("close:finish",function(){s(o.scrollOffset)}),this.opts.offCanvas&&e.scroll&&this.clck.push(function(e,n){if(i=Mmenu.$(),n.inMenu&&n.inListview){var t=e[0].getAttribute("href");if(r(t)){if(i=Mmenu.$(t),!this.node.$menu.is(".mm-menu_sidebar-expanded")||!Mmenu.$("html").is(".mm-wrapper_sidebar-expanded"))return{close:!0};s(this.conf.pageScroll.scrollOffset)}}}),e.update){var f=[],c=[];this.bind("initListview:after",function(e){Mmenu.filterListItemAnchors(e.find(".mm-listview").children("li")).each(function(e,n){var t=n.getAttribute("href");r(t)&&f.push(t)}),c=f.reverse()});var u=-1;Mmenu.$(window).on("scroll.mm-pageScroll",function(e){for(var n=Mmenu.$(window).scrollTop(),t=0;t<c.length;t++)if(Mmenu.$(c[t]).offset().top<n+o.updateOffset){u!==t&&(u=t,l.setSelected(Mmenu.filterListItemAnchors(l.node.$pnls.children(".mm-panel_opened").find(".mm-listview").children("li")).filter('[href="'+c[t]+'"]').parent()));break}})}},Mmenu.options.pageScroll={scroll:!1,update:!1},Mmenu.configs.pageScroll={scrollOffset:0,updateOffset:50};
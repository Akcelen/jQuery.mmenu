Mmenu.addons.pageScroll=function(){var i,r=this,e=this.opts.pageScroll,l=this.conf.pageScroll;function o(e){i&&i.length&&i.is(":visible")&&jQuery("html, body").animate({scrollTop:i.offset().top+e}),i=jQuery()}function s(e){try{return!("#"==e||"#"!=e.slice(0,1)||!Mmenu.node.$page.find(e).length)}catch(e){return!1}}if("boolean"==typeof e&&(e={scroll:e}),this.opts.pageScroll=Mmenu.extend(e,Mmenu.options.pageScroll),e.scroll&&this.bind("close:finish",function(){o(l.scrollOffset)}),this.opts.offCanvas&&e.scroll&&this.clck.push(function(e,t){if(i=jQuery(),t.inMenu&&t.inListview){var n=e[0].getAttribute("href");if(s(n)){if(i=jQuery(n),!this.node.$menu.is(".mm-menu_sidebar-expanded")||!jQuery("html").is(".mm-wrapper_sidebar-expanded"))return{close:!0};o(this.conf.pageScroll.scrollOffset)}}}),e.update){var f=[],c=[];this.bind("initListview:after",function(e){Mmenu.filterListItemAnchors(e.find(".mm-listview").children("li")).each(function(e,t){var n=t.getAttribute("href");s(n)&&f.push(n)}),c=f.reverse()});var u=-1;jQuery(window).on("scroll.mm-pageScroll",function(e){for(var t=jQuery(window).scrollTop(),n=0;n<c.length;n++)if(jQuery(c[n]).offset().top<t+l.updateOffset){u!==n&&(u=n,r.setSelected(Mmenu.filterListItemAnchors(r.node.$pnls.children(".mm-panel_opened").find(".mm-listview").children("li")).filter('[href="'+c[n]+'"]').parent()));break}})}},Mmenu.options.pageScroll={scroll:!1,update:!1},Mmenu.configs.pageScroll={scrollOffset:0,updateOffset:50};